{% extends "worker_base.html" %}
{% block worker_content %}
<div class="card">
  <div class="h2">ğŸ“¥ ì…ê³ </div>

  <div class="form">
    <input id="warehouse" placeholder="ì°½ê³ " value="MAIN">
    <input id="location" placeholder="ë¡œì¼€ì´ì…˜ (ì˜ˆ: D01-01)">
    <input id="brand" placeholder="ë¸Œëœë“œ(ì„ íƒ)">
    <input id="item_code" placeholder="í’ˆë²ˆ">
    <input id="item_name" placeholder="í’ˆëª…(ì„ íƒ)">
    <input id="lot_no" placeholder="LOT">
    <input id="spec" placeholder="ê·œê²©(ì„ íƒ)">
    <input id="qty" placeholder="ìˆ˜ëŸ‰" inputmode="decimal">
    <button class="btn primary" onclick="submitInbound()">ì…ê³  ì²˜ë¦¬</button>
    <div id="msg" class="muted"></div>
  </div>
</div>

<script>
async function submitInbound(){
  const body = {
    warehouse: document.getElementById('warehouse').value || 'MAIN',
    location: document.getElementById('location').value.trim(),
    brand: document.getElementById('brand').value || '',
    item_code: document.getElementById('item_code').value.trim(),
    item_name: document.getElementById('item_name').value || '',
    lot_no: document.getElementById('lot_no').value.trim(),
    spec: document.getElementById('spec').value || '',
    qty: parseFloat(document.getElementById('qty').value || '0')
  };
  const res = await fetch('/api/inbound', {
    method:'POST',
    headers:{'Content-Type':'application/json'},
    body: JSON.stringify(body)
  });
  const d = await res.json();
  document.getElementById('msg').innerText = res.ok ? 'âœ… ì…ê³  ì™„ë£Œ' : ('âŒ ' + (d.detail || JSON.stringify(d)));
}
</script>
{% endblock %}
