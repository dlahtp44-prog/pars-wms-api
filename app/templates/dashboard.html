{% extends "base.html" %}
{% block content %}
<div class="card">
  <div class="h1">ğŸ“Š ëŒ€ì‹œë³´ë“œ</div>

  <div class="grid4">
    <div class="kpi">
      <div class="k">ì˜¤ëŠ˜ ì…ê³ </div>
      <div class="v">{{ "%.0f"|format(s.inbound_today) }}</div>
    </div>
    <div class="kpi">
      <div class="k">ì˜¤ëŠ˜ ì¶œê³ </div>
      <div class="v">{{ "%.0f"|format(s.outbound_today) }}</div>
    </div>
    <div class="kpi">
      <div class="k">ì´ ì¬ê³ </div>
      <div class="v">{{ "%.0f"|format(s.total_stock) }}</div>
    </div>
    <div class="kpi {% if s.negative_rows>0 %}danger{% endif %}">
      <div class="k">ìŒìˆ˜ ì¬ê³  í–‰</div>
      <div class="v">{{ s.negative_rows }}</div>
    </div>
  </div>

  <div class="hr"></div>

  <div class="h2">Top 10 í’ˆë²ˆ ì¬ê³ </div>
  <div class="bars">
    {% set maxv = (s.top_items[0].qty if s.top_items|length>0 else 1) %}
    {% for it in s.top_items %}
      {% set w = (it.qty / maxv * 100) if maxv>0 else 0 %}
      <div class="barrow">
        <div class="label">{{ it.item_code }}</div>
        <div class="bar">
          <div class="fill" style="width:{{ w }}%"></div>
        </div>
        <div class="num">{{ "%.0f"|format(it.qty) }}</div>
      </div>
    {% endfor %}
  </div>
</div>
{% endblock %}
