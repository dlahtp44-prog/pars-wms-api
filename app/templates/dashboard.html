{% extends "base.html" %}
{% block content %}

<h2 class="title">ğŸ“Š ëŒ€ì‹œë³´ë“œ</h2>

<div class="grid">
  <div class="card"><div class="label">ì˜¤ëŠ˜ ì…ê³ </div><div class="value">{{ s.inbound_today }}</div></div>
  <div class="card"><div class="label">ì˜¤ëŠ˜ ì¶œê³ </div><div class="value">{{ s.outbound_today }}</div></div>
  <div class="card"><div class="label">ì´ ì¬ê³ </div><div class="value">{{ s.total_stock }}</div></div>
  <div class="card {% if s.negative_count>0 %}warn{% endif %}">
    <div class="label">ìŒìˆ˜ ì¬ê³ (ê±´)</div><div class="value">{{ s.negative_count }}</div>
  </div>
</div>

<div class="card" style="margin-top:12px;">
  <h3 class="subtitle">ì˜¤ëŠ˜ ì…ê³ /ì¶œê³  ê·¸ë˜í”„</h3>
  <canvas id="chart"></canvas>
</div>

<div class="actions">
  <a class="btn" href="/inbound-page">ğŸ“¥ ì…ê³ </a>
  <a class="btn" href="/outbound-page">ğŸ“¤ ì¶œê³ </a>
  <a class="btn" href="/move-page">ğŸ” ì´ë™</a>
  <a class="btn" href="/inventory-page">ğŸ“¦ ì¬ê³ </a>
</div>

<script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
<script>
(async()=>{
  const d = await (await fetch("/api/dashboard")).json();
  const ctx = document.getElementById("chart").getContext("2d");
  new Chart(ctx, {
    type: "bar",
    data: {
      labels: ["ì˜¤ëŠ˜ ì…ê³ ", "ì˜¤ëŠ˜ ì¶œê³ ", "ì´ ì¬ê³ "],
      datasets: [{
        label: "ìˆ˜ëŸ‰",
        data: [d.inbound_today, d.outbound_today, d.total_stock]
      }]
    },
    options: { responsive:true }
  });
})();
</script>

{% endblock %}
