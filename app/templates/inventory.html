{% extends "base.html" %}
{% block content %}
<div class="card">
  <div class="h1">ğŸ“¦ ì¬ê³  ì¡°íšŒ</div>

  <div class="row">
    <input id="q" placeholder="ê²€ìƒ‰(í’ˆë²ˆ/í’ˆëª…/LOT/ë¡œì¼€ì´ì…˜)" oninput="loadInv()" />
    <button class="btn" onclick="loadInv()">ê²€ìƒ‰</button>
  </div>

  <div class="tablewrap">
    <table class="table" id="tbl">
      <thead>
        <tr>
          <th>ì°½ê³ </th><th>ë¡œì¼€ì´ì…˜</th><th>í’ˆë²ˆ</th><th>LOT</th><th class="right">ìˆ˜ëŸ‰</th>
        </tr>
      </thead>
      <tbody></tbody>
    </table>
  </div>
</div>

<script>
async function loadInv(){
  const q = document.getElementById('q').value || '';
  const res = await fetch('/api/inventory?q=' + encodeURIComponent(q));
  const rows = await res.json();
  const tb = document.querySelector('#tbl tbody');
  tb.innerHTML = rows.map(r => `
    <tr>
      <td>${r.warehouse||''}</td>
      <td>${r.location||''}</td>
      <td>${r.item_code||''}</td>
      <td>${r.lot_no||''}</td>
      <td class="right">${Number(r.qty||0).toLocaleString()}</td>
    </tr>
  `).join('');
}
loadInv();
</script>
{% endblock %}
