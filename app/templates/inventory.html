
{% extends "base.html" %}
{% block content %}

<h4 class="fw-bold mb-3">현재고 조회</h4>

<div class="card p-3 shadow-sm mb-3">
    <div class="row g-2">

        <div class="col-md-3">
            <input id="item" class="form-control" placeholder="품번">
        </div>
        <div class="col-md-3">
            <input id="lot" class="form-control" placeholder="LOT">
        </div>
        <div class="col-md-3">
            <input id="wh" class="form-control" placeholder="창고">
        </div>
        <div class="col-md-3">
            <input id="loc" class="form-control" placeholder="Location">
        </div>
    </div>

    <button onclick="searchInv()" class="btn btn-success w-100 mt-3">검색</button>
</div>

<table class="table table-striped table-bordered">
    <thead class="table-dark">
        <tr>
            <th>품번</th>
            <th>LOT</th>
            <th>창고</th>
            <th>Location</th>
            <th>수량</th>
        </tr>
    </thead>
    <tbody id="invBody"></tbody>
</table>

<script>
async function searchInv(){
    const params = new URLSearchParams({
        item_code: item.value,
        lot_no: lot.value,
        warehouse: wh.value,
        location: loc.value
    });

    const res = await fetch(`/inventory/?${params}`);
    const rows = await res.json();

    let html = "";
    for(const r of rows){
        html += `
        <tr>
            <td>${r.item_code}</td>
            <td>${r.lot_no}</td>
            <td>${r.warehouse}</td>
            <td>${r.location}</td>
            <td>${r.qty}</td>
        </tr>`;
    }
    invBody.innerHTML = html;
}
</script>

{% endblock %}
