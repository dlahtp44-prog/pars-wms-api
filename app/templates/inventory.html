{% extends "base.html" %}
{% block content %}

<h2 class="title">ğŸ“¦ ì¬ê³  ì¡°íšŒ</h2>

<div class="card">
  <input placeholder="í’ˆë²ˆ / í’ˆëª… / LOT ê²€ìƒ‰" oninput="search(this.value)">
</div>

<div class="tablewrap">
<table class="inventory">
<thead>
<tr>
  <th>ì°½ê³ </th><th>ë¡œì¼€ì´ì…˜</th><th>ë¸Œëœë“œ</th>
  <th>í’ˆë²ˆ</th><th>í’ˆëª…</th><th>LOT</th><th>ê·œê²©</th>
  <th class="right">ìˆ˜ëŸ‰</th>
</tr>
</thead>
<tbody id="rows"></tbody>
</table>
</div>

<script>
async function search(q=""){
  const res = await fetch(`/api/inventory?q=${encodeURIComponent(q)}`);
  const rows = await res.json();
  let html="";
  for(const r of rows){
    html+=`
    <tr>
      <td>${r.warehouse||""}</td>
      <td>${r.location||""}</td>
      <td>${r.brand||""}</td>
      <td>${r.item_code||""}</td>
      <td>${r.item_name||""}</td>
      <td>${r.lot_no||""}</td>
      <td>${r.spec||""}</td>
      <td class="right"><b>${r.qty}</b></td>
    </tr>`;
  }
  document.getElementById("rows").innerHTML = html;
}
search();
</script>

{% endblock %}
