{% extends "base.html" %}
{% block content %}

<h2 class="title">ğŸ›  ê´€ë¦¬ì</h2>

<div class="grid">
  <div class="card"><div class="label">ì˜¤ëŠ˜ ì…ê³ </div><div class="value">{{ summary.inbound_today }}</div></div>
  <div class="card"><div class="label">ì˜¤ëŠ˜ ì¶œê³ </div><div class="value">{{ summary.outbound_today }}</div></div>
  <div class="card"><div class="label">ì´ ì¬ê³ </div><div class="value">{{ summary.total_stock }}</div></div>
  <div class="card warn"><div class="label">ìŒìˆ˜ ì¬ê³ </div><div class="value">{{ summary.negative_stock }}</div></div>
</div>

<div class="actions">
  <a class="btn" href="/upload-page">CSV ì—…ë¡œë“œ</a>
  <a class="btn" href="/history-page">ì´ë ¥/ë¡¤ë°±</a>
  <a class="btn" href="/inventory-page">ì¬ê³ ì¡°íšŒ</a>
  <a class="btn" href="/dashboard">ëŒ€ì‹œë³´ë“œ</a>
</div>

<hr class="hr">

<h3 class="subtitle">ìµœê·¼ ì´ë ¥ 30ê±´</h3>
<div class="tablewrap">
<table class="table">
  <thead>
    <tr>
      <th>ID</th><th>ì‹œê°„</th><th>ìœ í˜•</th><th>ì°½ê³ </th><th>ë¡œì¼€ì´ì…˜</th><th>í’ˆë²ˆ</th><th>LOT</th><th class="right">ìˆ˜ëŸ‰</th><th>ë¹„ê³ </th>
    </tr>
  </thead>
  <tbody>
    {% for r in hist %}
    <tr>
      <td>{{ r.id }}</td>
      <td>{{ r.created_at }}</td>
      <td>{{ r.tx_type }}</td>
      <td>{{ r.warehouse }}</td>
      <td>{{ r.location }}</td>
      <td>{{ r.item_code }}</td>
      <td>{{ r.lot_no }}</td>
      <td class="right">{{ r.qty }}</td>
      <td>{{ r.remark }}</td>
    </tr>
    {% endfor %}
  </tbody>
</table>
</div>

<style>
  .title{margin:0 0 12px 0;font-size:20px}
  .subtitle{margin:16px 0 8px 0;font-size:16px}
  .grid{display:grid;grid-template-columns:repeat(2,minmax(0,1fr));gap:10px}
  @media(min-width:900px){.grid{grid-template-columns:repeat(4,minmax(0,1fr))}}
  .card{background:#fff;border:1px solid #e5e7eb;border-radius:12px;padding:12px}
  .card .label{color:#6b7280;font-size:12px}
  .card .value{font-size:22px;font-weight:800;margin-top:4px}
  .card.warn{border-color:#ef4444}
  .actions{display:grid;grid-template-columns:repeat(2,minmax(0,1fr));gap:8px;margin-top:12px}
  @media(min-width:900px){.actions{grid-template-columns:repeat(4,minmax(0,1fr))}}
  .btn{display:block;text-align:center;padding:10px;border-radius:10px;background:#111827;color:#fff;text-decoration:none}
  .hr{border:none;border-top:1px solid #e5e7eb;margin:14px 0}
  .tablewrap{overflow:auto;border:1px solid #e5e7eb;border-radius:12px;background:#fff}
  .table{width:100%;border-collapse:collapse;font-size:13px;min-width:1100px}
  .table th,.table td{padding:10px;border-bottom:1px solid #f1f5f9;white-space:nowrap}
  .table th{background:#111827;color:#fff;position:sticky;top:0}
  .right{text-align:right}
</style>

{% endblock %}
