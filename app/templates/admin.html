{% extends "base.html" %}
{% block content %}

<h2 class="title">ğŸ›  ê´€ë¦¬ì ëŒ€ì‹œë³´ë“œ</h2>

<div class="tablewrap">
  <table class="table">
    <thead>
      <tr>
        <th>ID</th>
        <th>êµ¬ë¶„</th>
        <th>í’ˆë²ˆ</th>
        <th>LOT</th>
        <th class="right">ìˆ˜ëŸ‰</th>
        <th>ì²˜ë¦¬</th>
      </tr>
    </thead>
    <tbody>
    {% for r in rows %}
      <tr>
        <td>{{ r.id }}</td>
        <td>{{ r.tx_type }}</td>
        <td>{{ r.item_code }}</td>
        <td>{{ r.lot_no }}</td>
        <td class="right">{{ r.qty }}</td>
        <td>
          <button class="btn danger"
            onclick="rollback({{ r.id }})">
            ë¡¤ë°±
          </button>
        </td>
      </tr>
    {% endfor %}
    </tbody>
  </table>
</div>

<script>
function rollback(id){
  if(!confirm("ì´ ì´ë ¥ì„ ë¡¤ë°±í•˜ì‹œê² ìŠµë‹ˆê¹Œ?")) return;
  fetch(`/api/history/rollback/${id}`, { method:"POST" })
    .then(r => r.json())
    .then(() => location.reload());
}
</script>

<style>
/* ===== ê³µí†µ ===== */
.title{margin:0 0 14px 0;font-size:20px;font-weight:800}

/* ===== í…Œì´ë¸” ===== */
.tablewrap{
  overflow:auto;
  border:1px solid #e5e7eb;
  border-radius:12px;
  background:#fff;
}
.table{
  width:100%;
  border-collapse:collapse;
  font-size:13px;
  min-width:900px;
}
.table th,.table td{
  padding:10px;
  border-bottom:1px solid #f1f5f9;
  white-space:nowrap;
}
.table th{
  background:#111827;
  color:#fff;
  position:sticky;
  top:0;
  z-index:1;
}
.right{text-align:right}

/* ===== ë²„íŠ¼ ===== */
.btn{
  padding:6px 10px;
  border-radius:8px;
  border:none;
  cursor:pointer;
  font-size:12px;
}
.btn.danger{
  background:#ef4444;
  color:#fff;
}
.btn.danger:hover{
  background:#dc2626;
}

/* ===== ëª¨ë°”ì¼ ===== */
@media(max-width:768px){
  .table{font-size:12px}
}
</style>

{% endblock %}
