
{% extends "base.html" %}
{% block content %}

<h4 class="fw-bold mb-3">QR 스캔</h4>

<div class="card p-3 shadow-sm">

    <video id="preview" style="width:100%; border-radius:10px;" autoplay></video>

    <div class="mt-3">
        <textarea id="qrText" class="form-control" rows="3" placeholder="스캔 결과"></textarea>
    </div>

    <button onclick="startScan()" class="btn btn-dark w-100 mt-3">스캔 시작</button>
</div>

<script src="/static/js/qr-scanner.min.js"></script>

<script>
let scanner;

async function startScan() {
    const videoElem = document.getElementById("preview");

    scanner = new QrScanner(
        videoElem,
        result => {
            qrText.value = result;
            scanner.stop();
            alert("스캔 완료: " + result);
        },
        { highlightScanRegion: true }
    );

    scanner.start();
}
</script>

{% endblock %}
