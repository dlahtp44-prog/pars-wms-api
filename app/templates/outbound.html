{% extends "worker_base.html" %}
{% block worker_content %}
<div class="card">
  <div class="h2">üì§ Ï∂úÍ≥†</div>
  <div class="form">
    <input id="warehouse" placeholder="Ï∞ΩÍ≥†" value="MAIN">
    <input id="location" placeholder="Î°úÏºÄÏù¥ÏÖò">
    <input id="item_code" placeholder="ÌíàÎ≤à">
    <input id="lot_no" placeholder="LOT">
    <input id="qty" placeholder="ÏàòÎüâ" inputmode="decimal">
    <button class="btn primary" onclick="submitOutbound()">Ï∂úÍ≥† Ï≤òÎ¶¨</button>
    <div id="msg" class="muted"></div>
  </div>
</div>

<script>
async function submitOutbound(){
  const body = {
    warehouse: document.getElementById('warehouse').value || 'MAIN',
    location: document.getElementById('location').value.trim(),
    item_code: document.getElementById('item_code').value.trim(),
    lot_no: document.getElementById('lot_no').value.trim(),
    qty: parseFloat(document.getElementById('qty').value || '0')
  };
  const res = await fetch('/api/outbound', {
    method:'POST',
    headers:{'Content-Type':'application/json'},
    body: JSON.stringify(body)
  });
  const d = await res.json();
  document.getElementById('msg').innerText = res.ok ? '‚úÖ Ï∂úÍ≥† ÏôÑÎ£å' : ('‚ùå ' + (d.detail || JSON.stringify(d)));
}
</script>
{% endblock %}
