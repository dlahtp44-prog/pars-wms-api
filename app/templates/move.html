{% extends "worker_base.html" %}
{% block worker_content %}
<div class="card">
  <div class="h2">ğŸ” ì´ë™</div>
  <div class="form">
    <input id="warehouse" placeholder="ì°½ê³ " value="MAIN">
    <input id="item_code" placeholder="í’ˆë²ˆ">
    <input id="lot_no" placeholder="LOT">
    <input id="qty" placeholder="ìˆ˜ëŸ‰" inputmode="decimal">
    <input id="from_location" placeholder="FROM ë¡œì¼€ì´ì…˜">
    <input id="to_location" placeholder="TO ë¡œì¼€ì´ì…˜">
    <button class="btn primary" onclick="submitMove()">ì´ë™ ì²˜ë¦¬</button>
    <div id="msg" class="muted"></div>
  </div>
</div>

<script>
async function submitMove(){
  const body = {
    warehouse: document.getElementById('warehouse').value || 'MAIN',
    item_code: document.getElementById('item_code').value.trim(),
    lot_no: document.getElementById('lot_no').value.trim(),
    qty: parseFloat(document.getElementById('qty').value || '0'),
    from_location: document.getElementById('from_location').value.trim(),
    to_location: document.getElementById('to_location').value.trim(),
  };
  const res = await fetch('/api/move', {
    method:'POST',
    headers:{'Content-Type':'application/json'},
    body: JSON.stringify(body)
  });
  const d = await res.json();
  document.getElementById('msg').innerText = res.ok ? 'âœ… ì´ë™ ì™„ë£Œ' : ('âŒ ' + (d.detail || JSON.stringify(d)));
}
</script>
{% endblock %}
