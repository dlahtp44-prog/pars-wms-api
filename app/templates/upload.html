<script>
    document.getElementById('uploadForm').onsubmit = async (e) => {
        e.preventDefault();
        const fileInput = document.getElementById('excelFile');
        const formData = new FormData();
        formData.append('file', fileInput.files[0]);

        try {
            // 주소 수정: /api/excel/upload (X) -> /api/inbound/upload (O)
            const res = await fetch('/api/inbound/upload', { 
                method: 'POST', 
                body: formData 
            });
            const result = await res.json();

            if (res.ok) {
                alert('✅ ' + result.message);
                window.location.href = '/inventory-page'; // 성공 시 재고 페이지로 이동
            } else {
                alert('❌ 업로드 실패: ' + (result.detail || '오류 발생'));
            }
        } catch (err) {
            alert('❌ 서버 연결 실패. 네트워크 상태를 확인하세요.');
        }
    };
</script>
