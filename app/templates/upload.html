<script>
    document.getElementById('uploadForm').onsubmit = async (e) => {
        e.preventDefault();
        const fileInput = document.getElementById('excelFile');
        const formData = new FormData();
        formData.append('file', fileInput.files[0]);

        try {
            // 주소 주의: 반드시 /api/inbound/upload 여야 함
            const res = await fetch('/api/inbound/upload', { 
                method: 'POST', 
                body: formData 
            });
            const result = await res.json();

            if (res.ok) {
                alert('✅ ' + result.message);
                location.href = '/inventory-page'; 
            } else {
                alert('❌ 실패: ' + (result.detail || '알 수 없는 오류'));
            }
        } catch (err) {
            alert('❌ 서버 연결 실패');
        }
    };
</script>
