<form id="uploadForm">
    <div class="mb-4">
        <label class="form-label fw-bold">1. ì—‘ì…€ íŒŒì¼ ì„ íƒ (.xlsx)</label>
        <input class="form-control form-control-lg" type="file" id="excelFile" accept=".xlsx, .xls" required>
    </div>
    <button type="submit" class="btn btn-primary w-100 btn-lg shadow-sm">ğŸš€ ëŒ€ëŸ‰ ì…ê³  ì‹œì‘</button>
</form>

<div id="statusArea" class="mt-4" style="display:none;">
    <div id="loader" class="spinner-border spinner-border-sm text-primary me-2"></div>
    <span id="statusText">ì²˜ë¦¬ ì¤‘... ì ì‹œë§Œ ê¸°ë‹¤ë ¤ì£¼ì„¸ìš”.</span>
</div>

<script>
    document.getElementById('uploadForm').onsubmit = async (e) => {
        e.preventDefault();
        const fileInput = document.getElementById('excelFile');
        const formData = new FormData();
        formData.append('file', fileInput.files[0]);

        const statusArea = document.getElementById('statusArea');
        const statusText = document.getElementById('statusText');
        statusArea.style.display = 'block';

        try {
            // ê²½ë¡œë¥¼ /api/inbound/uploadë¡œ ì •í™•íˆ í˜¸ì¶œ
            const res = await fetch('/api/inbound/upload', { 
                method: 'POST', 
                body: formData 
            });
            const result = await res.json();

            if (res.ok) {
                alert('âœ… ' + result.message);
                location.href = '/inventory-page'; // ì„±ê³µ ì‹œ ì¬ê³  í˜ì´ì§€ë¡œ ì´ë™
            } else {
                alert('âŒ ì‹¤íŒ¨: ' + result.detail);
            }
        } catch (err) {
            alert('âŒ ì„œë²„ì™€ ì—°ê²°í•  ìˆ˜ ì—†ìŠµë‹ˆë‹¤.');
        } finally {
            statusArea.style.display = 'none';
        }
    };
</script>
