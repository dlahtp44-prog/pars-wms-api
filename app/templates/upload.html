<form id="uploadForm">
    <input type="file" id="excelFile" accept=".xlsx, .xls" required class="form-control">
    <button type="submit" class="btn btn-primary mt-3">데이터 업로드</button>
</form>

<script>
    document.getElementById('uploadForm').onsubmit = async (e) => {
        e.preventDefault();
        const fileInput = document.getElementById('excelFile');
        const formData = new FormData();
        formData.append('file', fileInput.files[0]);

        try {
            // 주소 수정: 로그상의 /api/excel/upload를 /api/inbound/upload로 변경
            const res = await fetch('/api/inbound/upload', { 
                method: 'POST', 
                body: formData 
            });
            const result = await res.json();

            if (res.ok) {
                alert('✅ ' + result.message);
                window.location.href = '/inventory-page'; // 성공 시 재고 현황 페이지로 이동
            } else {
                alert('❌ 실패: ' + (result.detail || '알 수 없는 오류'));
            }
        } catch (err) {
            alert('❌ 서버 연결 실패: ' + err);
        }
    };
</script>
